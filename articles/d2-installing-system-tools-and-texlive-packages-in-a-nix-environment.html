<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>d2 - Installing system tools and TexLive packages in a Nix environment • rix</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="d2 - Installing system tools and TexLive packages in a Nix environment">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rix</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a-getting-started.html">a - Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/b1-setting-up-and-using-rix-on-linux-and-windows.html">b1 - Setting up and using rix on Linux and Windows</a></li>
    <li><a class="dropdown-item" href="../articles/b2-setting-up-and-using-rix-on-macos.html">b2 - Setting up and using rix on macOS</a></li>
    <li><a class="dropdown-item" href="../articles/c-using-rix-to-build-project-specific-environments.html">c - Using rix to build project specific environments</a></li>
    <li><a class="dropdown-item" href="../articles/d1-installing-r-packages-in-a-nix-environment.html">d1 - Installing R packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.html">d2 - Installing system tools and TexLive packages in a Nix environment</a></li>
    <li><a class="dropdown-item" href="../articles/e-interactive-use.html">e - Interactive use</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">z - Advanced topic: Building an environment for literate programming</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-handling-packages-with-remote-dependencies.html">z - Advanced topic: Handling packages with remote dependencies</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-reproducible-analytical-pipelines-with-nix.html">z - Advanced topic: Reproducible Analytical Pipelines with Nix</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-running-r-or-shell-code-in-nix-from-r.html">z - Advanced topic: Running R or Shell Code in Nix from R</a></li>
    <li><a class="dropdown-item" href="../articles/z-advanced-topic-using-nix-inside-docker.html">z - Advanced topic: Using Nix inside Docker</a></li>
    <li><a class="dropdown-item" href="../articles/z-binary_cache.html">z - Advanced topic: Rolling out your own binary cache</a></li>
    <li><a class="dropdown-item" href="../articles/z-bleeding_edge.html">z - Advanced topic: Understanding the rPackages set release cycle and using bleeding edge packages</a></li>
    <li><a class="dropdown-item" href="../articles/z-contributing_to_nixpkgs.html">z - Advanced topic: Contributing to nixpkgs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/b-rodrigues/rix/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>d2 - Installing system tools and TexLive packages in a Nix environment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/b-rodrigues/rix/blob/master/vignettes/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.Rmd" class="external-link"><code>vignettes/d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.Rmd</code></a></small>
      <div class="d-none name"><code>d2-installing-system-tools-and-texlive-packages-in-a-nix-environment.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>More than 100’000 pieces of software are available through the Nix
package manager. Nix’s repository of packages is called
<code>nixpkgs</code> and it includes the entirety of CRAN and
Bioconductor. <code>nixpkgs</code> is actually “just” a Github
repository containing thousands upon thousands of Nix expressions. When
installing a package, these expressions get evaluated, and the package
in question gets installed. What “installed” means can vary: sometimes
the package gets built from source, sometimes a pre-compiled binary
package for your operating system gets downloaded and made
available.</p>
<p>For example, <a href="https://github.com/NixOS/nixpkgs/blob/dce218f4f35440622d2056f93ddc335351763bb4/pkgs/development/libraries/quarto/default.nix" class="external-link">here</a>
is the Nix expression that downloads and installs <a href="https://quarto.org/" class="external-link">Quarto</a>. This is an example of an
expression that downloads the pre-compiled binary from Quarto’s own
Github repository, and then installs it. The installation process in
this case is essentially making sure that Quarto is able to find its
dependencies, which also get installed from Nix, and some R and Python
packages to make Quarto work well with both languages also get
installed.</p>
<p>It is possible to use <code><a href="../reference/rix.html">rix()</a></code> to add tools to an
environment and this vignette explains how.</p>
</div>
<div class="section level2">
<h2 id="adding-tools-to-an-environment">Adding tools to an environment<a class="anchor" aria-label="anchor" href="#adding-tools-to-an-environment"></a>
</h2>
<p>The call below generates a <code>default.nix</code> that defines an
environment with the latest version of R. The R <a href="https://github.com/quarto-dev/quarto-r" class="external-link">quarto</a>
package is also installed, as well as the <code>quarto</code> command
line tool (required to edit Quarto documents from R using the
<a href="https://github.com/quarto-dev/quarto-r" class="external-link">quarto</a> package) and git:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quarto"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quarto"</span>, <span class="st">"git"</span><span class="op">)</span>,</span>
<span>  git_pkgs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>You can look for all the available software <a href="https://search.nixos.org/packages?channel=unstable&amp;from=0&amp;size=50&amp;sort=relevance&amp;type=packages&amp;query=" class="external-link">here</a>.
Simply look for the right package name, and add it to the
<code>system_pkgs</code> argument of <code><a href="../reference/rix.html">rix()</a></code>. If you have
trouble finding something, don’t hesitate to <a href="https://github.com/b-rodrigues/rix/issues" class="external-link">open an issue</a> and
ask for support!</p>
</div>
<div class="section level2">
<h2 id="installing-texlive-packages">Installing TexLive packages<a class="anchor" aria-label="anchor" href="#installing-texlive-packages"></a>
</h2>
<p>Whether you use Quarto, Rmarkdown, or Sweave, literate programming
with R requires a TexLive distribution to be installed. You can use
<code><a href="../reference/rix.html">rix()</a></code> to install a minimalist TexLive distribution and then
add the packages that you require as you go. The basic use is to simply
add a TexLive package to the <code>tex_pkgs</code> argument of
<code><a href="../reference/rix.html">rix()</a></code> like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">path_default_nix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/rix.html">rix</a></span><span class="op">(</span></span>
<span>  r_ver <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  r_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quarto"</span><span class="op">)</span>,</span>
<span>  system_pkgs <span class="op">=</span> <span class="st">"quarto"</span>,</span>
<span>  tex_pkgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"amsmath"</span><span class="op">)</span>,</span>
<span>  ide <span class="op">=</span> <span class="st">"other"</span>,</span>
<span>  project_path <span class="op">=</span> <span class="va">path_default_nix</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  print <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # This file was generated by the {rix} R package v0.7.1 on 2024-07-01</span></span>
<span><span class="co">#&gt; # with following call:</span></span>
<span><span class="co">#&gt; # &gt;rix(r_ver = "12a9c0004bc987afb1ff511ebb97b67497a68e22",</span></span>
<span><span class="co">#&gt; #  &gt; r_pkgs = c("quarto"),</span></span>
<span><span class="co">#&gt; #  &gt; system_pkgs = "quarto",</span></span>
<span><span class="co">#&gt; #  &gt; tex_pkgs = c("amsmath"),</span></span>
<span><span class="co">#&gt; #  &gt; ide = "other",</span></span>
<span><span class="co">#&gt; #  &gt; project_path = path_default_nix,</span></span>
<span><span class="co">#&gt; #  &gt; overwrite = TRUE,</span></span>
<span><span class="co">#&gt; #  &gt; print = TRUE)</span></span>
<span><span class="co">#&gt; # It uses nixpkgs' revision 12a9c0004bc987afb1ff511ebb97b67497a68e22 for reproducibility purposes</span></span>
<span><span class="co">#&gt; # which will install R version latest.</span></span>
<span><span class="co">#&gt; # Report any issues to https://github.com/b-rodrigues/rix</span></span>
<span><span class="co">#&gt; let</span></span>
<span><span class="co">#&gt;  pkgs = import (fetchTarball "https://github.com/NixOS/nixpkgs/archive/12a9c0004bc987afb1ff511ebb97b67497a68e22.tar.gz") {};</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;   rpkgs = builtins.attrValues {</span></span>
<span><span class="co">#&gt;     inherit (pkgs.rPackages)</span></span>
<span><span class="co">#&gt;       quarto;</span></span>
<span><span class="co">#&gt;   };</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;   tex = (pkgs.texlive.combine {</span></span>
<span><span class="co">#&gt;     inherit (pkgs.texlive)</span></span>
<span><span class="co">#&gt;       scheme-small</span></span>
<span><span class="co">#&gt;       amsmath;</span></span>
<span><span class="co">#&gt;   });</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;   system_packages = builtins.attrValues {</span></span>
<span><span class="co">#&gt;     inherit (pkgs)</span></span>
<span><span class="co">#&gt;       quarto</span></span>
<span><span class="co">#&gt;       R</span></span>
<span><span class="co">#&gt;       glibcLocales</span></span>
<span><span class="co">#&gt;       nix;</span></span>
<span><span class="co">#&gt;   };</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; in</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; pkgs.mkShell {</span></span>
<span><span class="co">#&gt;   LOCALE_ARCHIVE = if pkgs.system == "x86_64-linux" then  "${pkgs.glibcLocales}/lib/locale/locale-archive" else "";</span></span>
<span><span class="co">#&gt;   LANG = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_ALL = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_TIME = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_MONETARY = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_PAPER = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;    LC_MEASUREMENT = "en_US.UTF-8";</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;   buildInputs = [  rpkgs tex system_packages   ];</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>This will automically add the <em>small</em> TexLive distribution
available through <code>nixpkgs</code> with the <code>amsmath</code>
LaTex package. To know more about setting up environments for literate
programming, refer to the vignette
<code><a href="../articles/z-advanced-topic-building-an-environment-for-literate-programming.html">vignette("z-advanced-topic-building-an-environment-for-literate-programming")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="installing-ides">Installing IDEs<a class="anchor" aria-label="anchor" href="#installing-ides"></a>
</h2>
<p>Environments built with Nix are not completely cut off from the rest
of your system, and as such, you should be able to use your usual IDE to
interact with Nix environments. The only exception is RStudio.
Everything will be explained in greater detail in the vignette
<code><a href="../articles/e-interactive-use.html">vignette("e-interactive-use")</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bruno Rodrigues, Philipp Baumann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
